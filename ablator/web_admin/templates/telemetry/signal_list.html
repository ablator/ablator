{% extends '_base.html' %}
{% block tags_nav_active %}active{% endblock %}

{% block content %}
    <section>
        <div class="page-header">
            <div class="row">
                <div class="col-md-8">
                    <h1>Signals</h1>
                    <p class="lead">
                        A raw list of signals for this app
                    </p>
                    <p>
                        Active users in the last 24 hours: <span class="badge badge-pill badge-primary">{{ active_users_last_day }}</span>
                    </p>
                    <p>
                        Active users in the last 7 days: <span class="badge badge-pill badge-primary">{{ active_users_last_week }}</span>
                    </p>
                    <p>
                        Active users in the last 30 days: <span class="badge badge-pill badge-primary">{{ active_users_last_month }}</span>
                    </p>
                </div>
            </div>
        </div>
    </section>
    <section>
        <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/morris.js/0.5.1/morris.css">
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
        <script src="//cdnjs.cloudflare.com/ajax/libs/raphael/2.1.0/raphael-min.js"></script>
        <script src="//cdnjs.cloudflare.com/ajax/libs/morris.js/0.5.1/morris.min.js"></script>

        {% for chart_list in charts %}
            <hr>
            <div class="row">
                {% for chart in chart_list.items %}
                    <div class="col">
                    {{ chart.1.as_html }}
                    <p class="font-weight-bold">{{ chart.0 }}</p>
                    </div>
                {% endfor %}
            </div>
        {% endfor %}


    </section>
    <section>
        <table class="table table-striped table-hover">
            <thead>
            <tr>
                <th>Received At</th>
                <th>User</th>
                <th>Type</th>
                <th>Parameters</th>
            </tr>
            </thead>
            <tbody>
            {% for obj in object_list %}
                <tr>
                    <td>{{ obj.received_at }}</td>
                    <td>{{ obj.user.short_name }}</td>
                    <td>{{ obj.type }}</td>
                    <td>{{ obj.parameters }}</td>
                </tr>
            {% empty %}
                <tr>
                    <td>No Signals for this App yet.</td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
    </section>
{% endblock %}
